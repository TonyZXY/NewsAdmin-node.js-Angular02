<app-menubar></app-menubar>
<div class="container-fluid">
  <div class="row">
    <div class="col-sm-2">
      <app-toolbar [parentPath]="string"></app-toolbar>
      <!--[parentData]="path"-->
    </div>
    <div class="col-sm-10">
      <form class="col-7" method="post" action="/activity/addActivity" (ngSubmit)="onSubmit()" #addActivityForm="ngForm">
        <div class="form-group">
          <h3>活动添加</h3>
        </div>
        <div class="form-group">
          <label for="titleLabel">标题</label>
          <input
            type="text"
            class="form-control"
            id="titleLabel"
            required
            [(ngModel)]="activityToEdit.eventName"
            value="{{activity?.eventName}}"
            name="eventName"
            #eventName="ngModel">
        </div>
        <div class="form-group">
          <label for="eventhostLabel">举办方</label>
          <input
            type="text"
            class="form-control"
            id="eventhostLabel"
            required
            [(ngModel)]="activityToEdit.eventHost"
            value="{{activity?.eventHost}}"
            name="eventhost"
            #eventhost="ngModel">
        </div>
        <div class="form-group">
          <label for="descriptionLabel">活动简介</label>
          <textarea
            type="text"
            class="form-control"
            id="descriptionLabel"
            rows="5"
            required
            [(ngModel)]="activityToEdit.eventDescription"
            value="{{activity?.eventDescription}}"
            name="description"
            #description="ngModel">
            </textarea>
        </div>
        <div class="form-group">
          <label for="addressLabel">地址</label>
          <input
            type="text"
            class="form-control"
            id="addressLabel"
            required
            [(ngModel)]="activityToEdit.eventAddress"
            value="{{activity?.eventAddress}}"
            name="address"
            #address="ngModel">
        </div>

        <div class="form-group">
          <label for="suburbLabel">区</label>
          <input
            type="text"
            class="form-control"
            id="suburbLabel"
            required
            [(ngModel)]="activityToEdit.eventCity"
            value="{{activity?.eventCity}}"
            name="suburb"
            #suburb="ngModel">
        </div>

        <br><br>
        <div class="row">
          <div class="col-4">
            <label>举行日期: YYYY-MM-DD</label>
            <div class="input-group">
              <!--placeholder need to be changed to data time-->
              <input class="form-control"
                     placeholder="yyyy-mm-dd"
                     name="dateStart"
                     [(ngModel)]="dateStartFormat"
                     value="{{date}}"
                     ngbDatepicker
                     #df="ngbDatepicker"
                     #dateStart="ngModel"
                     id="dateLabel">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary"
                        (click)="df.toggle()"
                        type="button">
                  <img src="assets/images/calendar.png" style="width: 1.8rem; height: 1.8rem; cursor: pointer;">
                </button>
              </div>
            </div>
          </div>
        </div>

        <br><br>
        <div class="row">
          <div class="col-4">
            <!--placeholder need to be changed to data time-->
            <ngb-timepicker
              name="timeSet"
              [(ngModel)]="time"

              [meridian]="meridian">
            </ngb-timepicker>
            <button type="button"
                    class="btn btn-sm
                    btn-outline-{{meridian ? 'success' : 'danger'}}"
                    (click)="toggleMeridian()">
              24小时制 - {{meridian ? "开" : "关"}}
            </button>
            <hr>
          </div>
        </div>

        <div class="form-group">
          <label for="imageUrlLabel">图片地址</label>
          <textarea
            type="text"
            class="form-control"
            rows="5"
            id="imageUrlLabel"
            required
            [(ngModel)]="activityToEdit.eventImageURL"
            value="{{activity?.eventImageURL}}"
            name="imageURL"
            #imageURL="ngModel">
            </textarea>
        </div>
        <div class="form-group">
          <label for="urlLabel">文章地址</label>
          <textarea
            type="text"
            class="form-control"
            rows="5"
            id="urlLabel"
            required
            [(ngModel)]="activityToEdit.eventURL"
            value="{{activity?.eventURL}}"
            name="url"
            #url="ngModel">
            </textarea>
        </div>

        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="!addActivityForm.form.valid"
          data-toggle="modal"
          data-target="#informationDialog">
          Submit
        </button>

        <div class="modal fade" id="informationDialog" tabindex="-1" role="dialog"
             aria-labelledby="informationDialogTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="informationDialogTitle">{{messageTitle}}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                {{messageBody}}
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-dismiss="modal"
                  (click)="succeeded ? (addActivityForm.reset()) && (succeeded=false):false">
                  关闭
                </button>
              </div>
            </div>
          </div>
        </div>


      </form>
    </div>
  </div>
</div>
